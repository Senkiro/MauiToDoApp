<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MauiToDoApp.MainPage">

    <VerticalStackLayout Padding="20" Spacing="15">
        <Entry x:Name="TodoEntry" Placeholder="Nhập công việc..." FontSize="18" />
        <Button Text="Thêm" Clicked="OnAddClicked" BackgroundColor="LightBlue" TextColor="Black" />

        <Entry Placeholder="Tìm kiếm công việc..."
            x:Name="SearchEntry"
            TextChanged="OnSearchTextChanged"
            FontSize="16"
            Margin="0,10"/>


        <Picker x:Name="SortPicker" Title="Sắp xếp theo" SelectedIndexChanged="OnSortChanged">
            <Picker.Items>
                <x:String>Mặc định</x:String>
                <x:String>Thời gian tạo mới nhất</x:String>
                <x:String>Chưa hoàn thành trước</x:String>
            </Picker.Items>
        </Picker>

        <Label x:Name="RemainingLabel"
                FontSize="14"
                TextColor="DarkBlue"
                Margin="0,0,0,10"
                Text="Còn lại: 0 công việc" />

<<<<<<< HEAD

        <CollectionView x:Name="TodoListView" SelectionMode="Single" SelectionChanged="OnItemSelected">
=======
        <CollectionView x:Name="TodoListView">
>>>>>>> ecfcb6d406a6bc260cc3e57a899bb2427741552f
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <SwipeView>
                        <SwipeView.RightItems>
                            <SwipeItems>
                                <SwipeItem Text="Sửa"
                           BackgroundColor="Orange"
                           Invoked="OnEditClicked" />
                                <SwipeItem Text="Xoá"
                           BackgroundColor="Red"
                           Invoked="OnDeleteClicked" />
                            </SwipeItems>
                        </SwipeView.RightItems>

                        <Grid Padding="0" ColumnDefinitions="Auto, *" VerticalOptions="Center">
                            <!-- Checkbox để đánh dấu hoàn thành -->
                            <CheckBox Grid.Column="0"
                                        IsChecked="{Binding IsCompleted}"
                                        VerticalOptions="Start"
                                        Margin="0,2,10,0" />

                            <!-- Cột 1 chứa cả Tiêu đề và thời gian -->
                            <VerticalStackLayout Grid.Column="1" Spacing="2">
                                <!-- Label tiêu đề -->
                                <Label Text="{Binding Title}"
                                       FontSize="18"
                                       TextColor="Black">
                                    <Label.Style>
                                        <Style TargetType="Label">
                                            <Style.Triggers>
                                                <DataTrigger TargetType="Label" Binding="{Binding IsCompleted}" Value="True">
                                                    <Setter Property="TextDecorations" Value="Strikethrough" />
                                                    <Setter Property="TextColor" Value="Gray" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Label.Style>
                                </Label>

                                <!-- Label thời gian -->
                                <Label Text="{Binding CreatedAt, StringFormat='Tạo lúc: {0:dd/MM/yyyy HH:mm}'}"
                                        FontSize="12"
                                        TextColor="Gray" />
                            </VerticalStackLayout>
                        </Grid>
                    </SwipeView>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </VerticalStackLayout>
</ContentPage>
